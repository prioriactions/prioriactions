<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to prioriactions • prioriactions</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Introduction to prioriactions">
<meta property="og:description" content="prioriactions">
<meta property="og:image" content="https://prioriactions.github.io/prioriactions/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-7WG0HBKPY7"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7WG0HBKPY7');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioriactions</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../articles/prioriactions.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Introduction</li>
    <li>
      <a href="../articles/sensitivities.html">Benefits and sensitivities</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Study cases</li>
    <li>
      <a href="../articles/MitchellRiver.html">Mitchell River</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/prioriactions/prioriactions/">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>

    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><script src="prioriactions_files/header-attrs-2.10.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to prioriactions</h1>


      <small class="dont-index">Source: <a href="https://github.com/prioriactions/prioriactions/blob/master/vignettes/prioriactions.Rmd"><code>vignettes/prioriactions.Rmd</code></a></small>
      <div class="hidden name"><code>prioriactions.Rmd</code></div>

    </div>



<p>The <code>prioriactions</code> package is a new effort to bring exact modeling methods from operations research (OR) to conservation decision-making. Taking advantage of the benefits offered by these models over heuristics models (find much cheaper solutions in a much shorter period of time) <span class="citation">(Beyer et al. 2016)</span>. This helps to identify what actions to take against which threats to achieve ecological targets while minimizing the costs of the action or maximizing the benefits achieved given a certain available budget. The <code>prioriactions</code> package has the functionality of reading input data formatted in a similar way to that of the widely used conservation planning program called <a href="https://https://marxansolutions.org/">Marxan</a> <span class="citation">(Watts et al. 2009)</span>.</p>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <code>prioriactions</code> package uses two main types of functions: The creation and solution functions of mathematical models; and the functions to obtain information about the solution(s) (see <a href="https://prioriactions.github.io/prioriactions/reference/index.html">references</a> section).</p>
<p>The creation and resolution of a mathematical model can follow two forms: 1) the <em>extended</em> form (by steps); and 2) the <em>compressed</em> form:</p>
<ol style="list-style-type: decimal">
<li><p>The <em>extended</em> form uses a simple three-step logic: the creation of a <a href="https://prioriactions.github.io/prioriactions/reference/conservationProblem-class.html">conservation problem</a> object by the <code><a href="../reference/problem.html">problem()</a></code> function, the creation of an <a href="https://prioriactions.github.io/prioriactions/reference/optimizationProblem-class.html">optimization problem</a> object by the <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code> or <code><a href="../reference/maximizeBenefits.html">maximizeBenefits()</a></code> functions and its <a href="https://prioriactions.github.io/prioriactions/reference/solution-class.html">solution</a> by the <code><a href="../reference/solve.html">solve()</a></code> function.</p></li>
<li><p>The <em>compressed</em> form allows with a single function called <code><a href="../reference/prioriactions.html">prioriactions()</a></code> to compress the three steps presented in the <em>extended</em> form.</p></li>
</ol>
<p>We recommend using the <em>extended</em> form most of the time. This allows us to verify that all the steps are correct, and it can be helpful to check for errors without completely rerunning everything again.</p>
<p>Note that optimization models can take significant time to create (depending on how large the inputs are). The <em>extended</em> form allows to generate the <a href="https://prioriactions.github.io/prioriactions/reference/optimizationProblem-class.html">optimization problem</a> object (following the first two steps) and then experiment with different parameters for their resolution through the <code><a href="../reference/solve.html">solve()</a></code> function. In this way, repetitive creation is avoided in the case of use the compressed form.</p>
<p>The <code>prioriactions</code> package also allows working with two types of models, <strong>recovery</strong> models, and purely <strong>conservation</strong> models; the first, assume that there are only benefits when taking action against threats and there is no benefit when selecting planning units where the species are not threatened; on the contrary, a conservation model does assume benefits by selecting units without threats. The above is exemplified in the following diagram:</p>
<p><img src="data/picture1.png" style="width:70.0%"></p>
<p>The decision to work with any of these types must be informed through the <code>recovery</code> parameter of the <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code> and <code><a href="../reference/maximizeBenefits.html">maximizeBenefits()</a></code> functions. The calculation of the benefit for both cases is detailed in the <a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">sensitivities</a> vignette.</p>
</div>
<div id="workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#workflow" class="anchor"></a>Workflow</h2>
<p>The general workflow when working with <code>prioriactions</code> is:</p>
<ol style="list-style-type: decimal">
<li>Call the <code><a href="../reference/problem.html">problem()</a></code> function to verify that the inputs have a correct structure.</li>
<li>Call a mathematical modeling function. At the moment there are two types: <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code> and <code><a href="../reference/maximizeBenefits.html">maximizeBenefits()</a></code>. Both functions have a series of parameters that allow you to control different aspects of your model.</li>
<li>Call the <code><a href="../reference/solve.html">solve()</a></code> function to solve the model created in the previous step.</li>
<li>Get information about solutions with <em>get</em> prefix functions (e.g. <code><a href="../reference/getActions.html">getActions()</a></code> or <code><a href="../reference/getBenefit.html">getBenefit()</a></code>).</li>
<li>To perform sensitivity analysis, repeat steps 2-4 modifying model or solver parameters. Or use functions with <em>eval</em> prefix for this purpose (e.g. <code><a href="../reference/evalBudget.html">evalBudget()</a></code> or <code><a href="../reference/evalTarget.html">evalTarget()</a></code>).</li>
</ol>
<p>Note that the first three steps correspond to the <em>extended</em> way of working. That is, it would only be a step if you work with the <code><a href="../reference/prioriactions.html">prioriactions()</a></code> function.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Here we will introduce the use of the <code>prioriactions</code> package from presenting the inputs data style to obtaining results. First, we will load the <code>prioriactions</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://prioriactions.github.io/prioriactions">prioriactions</a></span><span class="op">)</span></code></pre></div>
<p>The package inherits the input data from the marxan software, which is widely known for conservation planning (more details in <a href="https://marxansolutions.org/download/marxan-user-manual-2021/">marxan user manual</a>). The data contains information about the species/features of our case study and spatial information about them. For this, the case study is divided into multiple sites called <em>planning units</em> (PU). In turn, information is provided on the representativeness values (<em>targets</em>) to be obtained for each species/feature. And other filds such as the cost associated with each PU. The package follows this data format and incorporates information about the threats and their relationship with those species/features.</p>
<p>All inputs in this package are in tabular format (i.e. <code>data.frame</code>). For more information on he mandatory fields in the input data, please see the help page for the <code><a href="../reference/problem.html">problem()</a></code> function.</p>
<p>Below is a basic example of using <code>prioriactions</code>.</p>
<div id="planning-units-data" class="section level3">
<h3 class="hasAnchor">
<a href="#planning-units-data" class="anchor"></a>Planning units data</h3>
<p>First, we will load the <strong>planning unit data</strong> (<code>sim_pu_data</code>). This is a <code>data.frame</code> that contains information about the PU ids, costs, and status. The latter indicates if the PU can be part of the solution or not.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load planning unit data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">sim_pu_data</span><span class="op">)</span>

<span class="co"># print first six rows of data</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">sim_pu_data</span><span class="op">)</span>
<span class="co">#&gt;   id cost status</span>
<span class="co">#&gt; 1  1    2      0</span>
<span class="co">#&gt; 2  2    2      0</span>
<span class="co">#&gt; 3  3    2      0</span>
<span class="co">#&gt; 4  4    2      0</span>
<span class="co">#&gt; 5  5    2      0</span>
<span class="co">#&gt; 6  6    2      0</span></code></pre></div>
<p>The example contains 100 planning units and with cost values ranging from 1 to 10. A <code>RasterLayer</code>object can be used to present the spatial information. Here, the planning units are represented as a raster (i.e. a <code>RasterLayer</code> object) and each pixel corresponds to the spatial extent of each panning unit. The pixel values correspond to the acquisition costs of each planning unit.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#plot planning unit costs</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span>

<span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span>ncol<span class="op">=</span><span class="fl">10</span>, nrow<span class="op">=</span><span class="fl">10</span>, xmn<span class="op">=</span><span class="fl">0</span>, xmx<span class="op">=</span><span class="fl">10</span>, ymn<span class="op">=</span><span class="fl">0</span>, ymx<span class="op">=</span><span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">sim_pu_data</span><span class="op">$</span><span class="va">cost</span>
<span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></code></pre></div>
<p><img src="figure/P3-1.png" title="plot of chunk P3" alt="plot of chunk P3" style="display: block; margin: auto;"></p>
</div>
<div id="features-data" class="section level3">
<h3 class="hasAnchor">
<a href="#features-data" class="anchor"></a>Features data</h3>
<p>The second data to be entered correspond to <strong>features</strong> (<code>sim_features_data</code> and <code>sim_dist_features_data</code>). The first one provides information about the features such as its id and target (mandatory to <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code>). And the second provides information on the spatial distribution of these features.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load features data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">sim_features_data</span>, <span class="va">sim_dist_features_data</span><span class="op">)</span>

<span class="co"># print first six rows of data</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">sim_features_data</span><span class="op">)</span>
<span class="co">#&gt;   id target     name</span>
<span class="co">#&gt; 1  1     11 feature1</span>
<span class="co">#&gt; 2  2     16 feature2</span>
<span class="co">#&gt; 3  3      8 feature3</span>
<span class="co">#&gt; 4  4      9 feature4</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">sim_dist_features_data</span><span class="op">)</span>
<span class="co">#&gt;     pu feature amount</span>
<span class="co">#&gt; 201  1       3      1</span>
<span class="co">#&gt; 202  2       3      1</span>
<span class="co">#&gt; 203  3       3      1</span>
<span class="co">#&gt; 204  4       3      1</span>
<span class="co">#&gt; 205  5       3      1</span>
<span class="co">#&gt; 206  6       3      1</span></code></pre></div>
<p>To present the features, a <code>RasterStack</code> object (group of <code>RasterLayer</code> objects) is used. The pixel values in each layer correspond to the amount of suitable habitat available in a given planning unit. Note that our planning unit raster layer and our conservation feature stack have exactly the same spatial properties (i.e. resolution, extent, coordinate reference system) so their pixels line up perfectly. In turn, we assume binary values of amount (presence and absence). However, the amount could contain continuous values (for example, relative to the area of the PU).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load amount of features data</span>
<span class="va">features</span> <span class="op">&lt;-</span> <span class="fu">reshape2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span><span class="op">(</span><span class="va">sim_dist_features_data</span>, <span class="va">pu</span><span class="op">~</span><span class="va">feature</span>,value.var <span class="op">=</span> <span class="st">"amount"</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>

<span class="co"># create stack layer</span>
<span class="va">group_rasters</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html">stack</a></span><span class="op">(</span><span class="va">r</span>, <span class="va">r</span>, <span class="va">r</span>, <span class="va">r</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">features</span><span class="op">$</span><span class="va">`1`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">features</span><span class="op">$</span><span class="va">`2`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">features</span><span class="op">$</span><span class="va">`3`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">features</span><span class="op">$</span><span class="va">`4`</span>

<span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"feature 1"</span>, <span class="st">"feature 2"</span>, <span class="st">"feature 3"</span>, <span class="st">"feature 4"</span><span class="op">)</span>
<span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">)</span></code></pre></div>
<p><img src="figure/P5-1.png" title="plot of chunk P5" alt="plot of chunk P5" style="display: block; margin: auto;"></p>
</div>
<div id="threats-data" class="section level3">
<h3 class="hasAnchor">
<a href="#threats-data" class="anchor"></a>Threats data</h3>
<p>Finally, the new inputs compared to marxan are those related to <strong>threats</strong>. (<code>sim_threats_data</code>, <code>sim_dist_threats_data</code> and <code>sim_sensitivity_data</code>). The first one provides information about the threats such as its id and name. The second provides information on the spatial distribution of these threats and the last one indicates the relationship between features and threats.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load threats data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">sim_threats_data</span>, <span class="va">sim_dist_threats_data</span>, <span class="va">sim_sensitivity_data</span><span class="op">)</span>

<span class="co"># print first six rows of data</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">sim_threats_data</span><span class="op">)</span>
<span class="co">#&gt;   id    name blm_actions</span>
<span class="co">#&gt; 1  1 threat1           0</span>
<span class="co">#&gt; 2  2 threat2           0</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">sim_dist_threats_data</span><span class="op">)</span>
<span class="co">#&gt;     pu threat amount cost status</span>
<span class="co">#&gt; 1    1      1      1    4      0</span>
<span class="co">#&gt; 101  1      2      1    3      0</span>
<span class="co">#&gt; 2    2      1      1    4      0</span>
<span class="co">#&gt; 102  2      2      1    2      0</span>
<span class="co">#&gt; 3    3      1      1    4      0</span>
<span class="co">#&gt; 103  3      2      1    2      0</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">sim_sensitivity_data</span><span class="op">)</span>
<span class="co">#&gt;   feature threat</span>
<span class="co">#&gt; 1       1      1</span>
<span class="co">#&gt; 2       2      1</span>
<span class="co">#&gt; 3       3      1</span>
<span class="co">#&gt; 4       4      1</span>
<span class="co">#&gt; 5       1      2</span>
<span class="co">#&gt; 6       2      2</span></code></pre></div>
<p>Note that the <code>sim_dist_threats_data</code> file contains information on the cost of taking action against a threat on a site, in addition to the status that works in the same way as the status associated with PU’s. In this example, a binary amount of threats (presence/absence) is assumed. However, this quantity can be continuous, which implies a more in-depth analysis of the consequences for the features (see more details in the <a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">sensitivities</a> vignette).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load amount of threat data</span>
<span class="va">threats</span> <span class="op">&lt;-</span> <span class="fu">reshape2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span><span class="op">(</span><span class="va">sim_dist_threats_data</span>, <span class="va">pu</span><span class="op">~</span><span class="va">threat</span>,value.var <span class="op">=</span> <span class="st">"amount"</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>

<span class="co"># create stack layer</span>
<span class="va">group_rasters</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html">stack</a></span><span class="op">(</span><span class="va">r</span>, <span class="va">r</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">threats</span><span class="op">$</span><span class="va">`1`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">threats</span><span class="op">$</span><span class="va">`2`</span>

<span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"threat 1"</span>, <span class="st">"threat 2"</span><span class="op">)</span>
<span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">)</span></code></pre></div>
<p><img src="figure/P7-1.png" title="plot of chunk P7" alt="plot of chunk P7" style="display: block; margin: auto;"></p>
</div>
<div id="boundary-data" class="section level3">
<h3 class="hasAnchor">
<a href="#boundary-data" class="anchor"></a>Boundary data</h3>
<p>The <strong>boundary</strong> data (<code>sim_boundary_data</code>) provides information on the spatial relationship between the PU’s and they are presented in long format. This input is not mandatory and is only necessary if you are interested in obtaining more connected solutions.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load boundary data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">sim_boundary_data</span><span class="op">)</span>

<span class="co"># print first six rows of data</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">sim_boundary_data</span><span class="op">)</span>
<span class="co">#&gt;   id1 id2 boundary</span>
<span class="co">#&gt; 1   1   1        0</span>
<span class="co">#&gt; 2   2   1        1</span>
<span class="co">#&gt; 3   3   1        2</span>
<span class="co">#&gt; 4   4   1        3</span>
<span class="co">#&gt; 5   5   1        4</span>
<span class="co">#&gt; 6   6   1        5</span></code></pre></div>
</div>
<div id="step-1-initialize-the-problem" class="section level3">
<h3 class="hasAnchor">
<a href="#step-1-initialize-the-problem" class="anchor"></a>Step 1: Initialize the problem</h3>
<p>After having loaded our planning unit and feature data, we will now create the <a href="https://prioriactions.github.io/prioriactions/reference/conservationProblem-class.html">conservation problem</a> object through the <code><a href="../reference/problem.html">problem()</a></code> function. With it you can check if all the fields of the different inputs are correct.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create conservation problem</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/problem.html">problem</a></span><span class="op">(</span><span class="va">sim_pu_data</span>, <span class="va">sim_features_data</span>, <span class="va">sim_dist_features_data</span>, <span class="va">sim_threats_data</span>, <span class="va">sim_dist_threats_data</span>, <span class="va">sim_sensitivity_data</span>, <span class="va">sim_boundary_data</span><span class="op">)</span>

<span class="co"># print problem</span>
<span class="fu"><a href="../reference/print.html">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>
<span class="co">#&gt; Conservation Problem</span>
<span class="co">#&gt;   planning units: data.frame (100 units)</span>
<span class="co">#&gt;   unit costs:     min: 1, max: 10</span>
<span class="co">#&gt;   features:       feature1, feature2, feature3, feature4 (4 features)</span>
<span class="co">#&gt;   threats:        threat1, threat2 (2 threats)</span>
<span class="co">#&gt;   threat costs:   min: 1, max: 10</span></code></pre></div>
<p>Note that once the problem is created, we can obtain information from the object and thus know if the data was loaded correctly. For this, we can use some functions that are inside the object (e.g <code>getThreatsAmount()</code>).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get information about object</span>
<span class="va">p</span><span class="op">$</span><span class="fu">getThreatsAmount</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 2</span>
<span class="va">p</span><span class="op">$</span><span class="fu">getPlanningUnitsAmount</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 100</span></code></pre></div>
<p>Furthermore, it is possible to observe the <a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">benefit</a> calculation before creating the mathematical model. Thus we can evaluate different targets and avoid creating an infeasible model where the targets exceed the benefit.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get benefit information</span>
<span class="fu"><a href="../reference/getBenefit.html">getBenefit</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>
<span class="co">#&gt;   feature dist dist_threatened benefit.nothing benefit.recovery benefit.total</span>
<span class="co">#&gt; 1       1   47              47               0               47            47</span>
<span class="co">#&gt; 2       2   30              30               0               30            30</span>
<span class="co">#&gt; 3       3   66              66               0               66            66</span>
<span class="co">#&gt; 4       4   33              33               0               33            33</span></code></pre></div>
<p>Note that the total distribution of the features (<em>dist</em>) and the threatened distribution (<em>dist_threatened</em>) is reported. That is, some features in some units could be benefited without carrying out conservation actions on them (<em>benefit</em>.<em>nothing</em>). The inclusion of these units in the solutions will depend on the <strong>recovery</strong> parameter (TRUE or FALSE) that is part of the <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code> and <code><a href="../reference/maximizeBenefits.html">maximizeBenefits()</a></code> function.</p>
</div>
<div id="step-2-create-the-mathematical-model" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2-create-the-mathematical-model" class="anchor"></a>Step 2: Create the mathematical model</h3>
<p>The next step is create the <a href="https://prioriactions.github.io/prioriactions/reference/optimizationProblem-class.html">optimization problem</a> object with those data. We currently have two types of models: <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code> and <code><a href="../reference/maximizeBenefits.html">maximizeBenefits()</a></code>. The first one, minimize the cost of the solution whilst ensuring that all targets are met. Instead, the second maximizes the benefits achieved by the features using a certain budget (all details on their respective reference pages).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create optimization problem</span>
<span class="va">op</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/minimizeCosts.html">minimizeCosts</a></span><span class="op">(</span><span class="va">p</span>, recovery <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Warning: The blm argument was set to 0, so the boundary data has no effect</span>
<span class="co">#&gt; Warning: Some blm_actions argument were set to 0, so the boundary data has no</span>
<span class="co">#&gt; effect for these cases</span>

<span class="co"># print problem</span>
<span class="fu"><a href="../reference/print.html">print</a></span><span class="op">(</span><span class="va">op</span><span class="op">)</span>
<span class="co">#&gt; Optimization Problem</span>
<span class="co">#&gt;   model sense: minimization</span>
<span class="co">#&gt;   dimensions:  280, 589, 13.72 kB (nrow, ncol, size)</span>
<span class="co">#&gt;   variables:   589</span></code></pre></div>
<p>Both functions have the parameter <em>recovery</em> = TRUE by default. This important parameter indicates if your model will use cells (TRUE) or not (FALSE) without actions as benefits for the features (therefore, the units will count it in calculating the targets) only because there is no interaction between threats and features.</p>
<p>Internally, the <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code> and <code><a href="../reference/maximizeBenefits.html">maximizeBenefits()</a></code> functions have a presolve that identifies these problems and prevents you from continuing to the next steps. In the case of not reaching the target established for any feature, it is assumed that its new target will be the maximum value of the associated benefit.</p>
<p>The two warnings indicate that there are no values for <em>blm</em> and <em>blm_actions</em> (arguments to achieve greater connectivity in the solution), and therefore the input boundary file will have no effect.</p>
</div>
<div id="step-3-solve-the-model" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3-solve-the-model" class="anchor"></a>Step 3: Solve the model</h3>
<p>Finally, after creating the mathematical model, we can now solve it with the <code><a href="../reference/solve.html">solve()</a></code> function. To solve our model, we need an optimization engine. Currently, <code>prioriactions</code> have available two: <em>gurobi</em> (it needs a license to work) and <em>rsymphony</em> (free to use). We highly recommend using gurobi (for more information on how to obtain an academic license <a href="https://prioritizr.net/articles/gurobi_installation.html">here</a>).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># solve optimization problem</span>
<span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve.html">solve</a></span><span class="op">(</span><span class="va">op</span>, solver <span class="op">=</span> <span class="st">"gurobi"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, output_file <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; Gurobi Optimizer version 9.1.2 build v9.1.2rc0 (linux64)</span>
<span class="co">#&gt; Thread count: 2 physical cores, 4 logical processors, using up to 2 threads</span>
<span class="co">#&gt; Optimize a model with 280 rows, 589 columns and 822 nonzeros</span>
<span class="co">#&gt; Model fingerprint: 0x9475cbf3</span>
<span class="co">#&gt; Model has 176 general constraints</span>
<span class="co">#&gt; Variable types: 352 continuous, 237 integer (237 binary)</span>
<span class="co">#&gt; Coefficient statistics:</span>
<span class="co">#&gt;   Matrix range     [5e-01, 2e+00]</span>
<span class="co">#&gt;   Objective range  [1e+00, 1e+01]</span>
<span class="co">#&gt;   Bounds range     [1e+00, 1e+00]</span>
<span class="co">#&gt;   RHS range        [8e+00, 2e+01]</span>
<span class="co">#&gt; Found heuristic solution: objective 1002.0000000</span>
<span class="co">#&gt; Presolve added 289 rows and 635 columns</span>
<span class="co">#&gt; Presolve time: 0.00s</span>
<span class="co">#&gt; Presolved: 569 rows, 1224 columns, 2970 nonzeros</span>
<span class="co">#&gt; Presolved model has 176 SOS constraint(s)</span>
<span class="co">#&gt; Variable types: 1056 continuous, 168 integer (162 binary)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Root relaxation: objective 1.455000e+02, 186 iterations, 0.00 seconds</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work</span>
<span class="co">#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      0     0  145.50000    0   12 1002.00000  145.50000  85.5%     -    0s</span>
<span class="co">#&gt; H    0     0                     973.0000000  145.50000  85.0%     -    0s</span>
<span class="co">#&gt;      0     0  148.00000    0    6  973.00000  148.00000  84.8%     -    0s</span>
<span class="co">#&gt; H    0     0                     162.0000000  148.00000  8.64%     -    0s</span>
<span class="co">#&gt;      0     0  149.00000    0    6  162.00000  149.00000  8.02%     -    0s</span>
<span class="co">#&gt; H    0     0                     152.0000000  149.00000  1.97%     -    0s</span>
<span class="co">#&gt;      0     0  149.50000    0    5  152.00000  149.50000  1.64%     -    0s</span>
<span class="co">#&gt; H    0     0                     150.0000000  149.50000  0.33%     -    0s</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Explored 1 nodes (219 simplex iterations) in 0.05 seconds</span>
<span class="co">#&gt; Thread count was 2 (of 4 available processors)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Solution count 5: 150 152 162 ... 1002</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Optimal solution found (tolerance 0.00e+00)</span>
<span class="co">#&gt; Best objective 1.500000000000e+02, best bound 1.500000000000e+02, gap 0.0000%</span></code></pre></div>
<p>Note that the log is shown by default with relevant information about the optimization process (<em>verbose</em> = TRUE). This information can be important when evaluating how the process is being carried out. For example, to check the solution’s quality (<em>gaps</em>), the size of the problem, or the cores being used. More information on how to read this log in <a href="https://www.gurobi.com/documentation/9.1/refman/mip_logging.html">MIP_logging documentation</a>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># plot solution object</span>
<span class="fu"><a href="../reference/print.html">print</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span>
<span class="co">#&gt; Solution overview</span>
<span class="co">#&gt;   name: sol</span>
<span class="co">#&gt;   objective value: 150</span>
<span class="co">#&gt;   gap:  0</span>
<span class="co">#&gt;   status:  Optimal solution (according to gap tolerance: 0)</span>
<span class="co">#&gt;   runtime: 0.05 sec</span></code></pre></div>
<p><strong>These three steps can be shortened to just one with the <code>prioriactions</code> function. This function inherits all the parameters of the <code><a href="../reference/problem.html">problem()</a></code>, <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code>, <code><a href="../reference/maximizeBenefits.html">maximizeBenefits()</a></code> and <code><a href="../reference/solve.html">solve()</a></code> functions:</strong></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a list with the data input</span>
<span class="va">inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">sim_pu_data</span>, <span class="va">sim_features_data</span>, <span class="va">sim_dist_features_data</span>, <span class="va">sim_threats_data</span>, <span class="va">sim_dist_threats_data</span>, <span class="va">sim_sensitivity_data</span>, <span class="va">sim_boundary_data</span><span class="op">)</span>

<span class="co">#execute prioriactions function</span>
<span class="va">s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prioriactions.html">prioriactions</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">inputs</span>, name_model <span class="op">=</span> <span class="st">"minimizeCosts"</span>, solver <span class="op">=</span> <span class="st">"gurobi"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, output_file <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; Warning: The blm argument was set to 0, so the boundary data has no effect</span>
<span class="co">#&gt; Warning: Some blm_actions argument were set to 0, so the boundary data has no</span>
<span class="co">#&gt; effect for these cases</span>
<span class="co">#&gt; Gurobi Optimizer version 9.1.2 build v9.1.2rc0 (linux64)</span>
<span class="co">#&gt; Thread count: 2 physical cores, 4 logical processors, using up to 2 threads</span>
<span class="co">#&gt; Optimize a model with 280 rows, 589 columns and 822 nonzeros</span>
<span class="co">#&gt; Model fingerprint: 0x9475cbf3</span>
<span class="co">#&gt; Model has 176 general constraints</span>
<span class="co">#&gt; Variable types: 352 continuous, 237 integer (237 binary)</span>
<span class="co">#&gt; Coefficient statistics:</span>
<span class="co">#&gt;   Matrix range     [5e-01, 2e+00]</span>
<span class="co">#&gt;   Objective range  [1e+00, 1e+01]</span>
<span class="co">#&gt;   Bounds range     [1e+00, 1e+00]</span>
<span class="co">#&gt;   RHS range        [8e+00, 2e+01]</span>
<span class="co">#&gt; Found heuristic solution: objective 1002.0000000</span>
<span class="co">#&gt; Presolve added 289 rows and 635 columns</span>
<span class="co">#&gt; Presolve time: 0.00s</span>
<span class="co">#&gt; Presolved: 569 rows, 1224 columns, 2970 nonzeros</span>
<span class="co">#&gt; Presolved model has 176 SOS constraint(s)</span>
<span class="co">#&gt; Variable types: 1056 continuous, 168 integer (162 binary)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Root relaxation: objective 1.455000e+02, 186 iterations, 0.00 seconds</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work</span>
<span class="co">#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      0     0  145.50000    0   12 1002.00000  145.50000  85.5%     -    0s</span>
<span class="co">#&gt; H    0     0                     973.0000000  145.50000  85.0%     -    0s</span>
<span class="co">#&gt;      0     0  148.00000    0    6  973.00000  148.00000  84.8%     -    0s</span>
<span class="co">#&gt; H    0     0                     162.0000000  148.00000  8.64%     -    0s</span>
<span class="co">#&gt;      0     0  149.00000    0    6  162.00000  149.00000  8.02%     -    0s</span>
<span class="co">#&gt; H    0     0                     152.0000000  149.00000  1.97%     -    0s</span>
<span class="co">#&gt;      0     0  149.50000    0    5  152.00000  149.50000  1.64%     -    0s</span>
<span class="co">#&gt; H    0     0                     150.0000000  149.50000  0.33%     -    0s</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Explored 1 nodes (219 simplex iterations) in 0.05 seconds</span>
<span class="co">#&gt; Thread count was 2 (of 4 available processors)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Solution count 5: 150 152 162 ... 1002</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Optimal solution found (tolerance 0.00e+00)</span>
<span class="co">#&gt; Best objective 1.500000000000e+02, best bound 1.500000000000e+02, gap 0.0000%</span></code></pre></div>
</div>
<div id="getting-information-about-solutions" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-information-about-solutions" class="anchor"></a>Getting information about solutions</h3>
<p>We can get the solutions with <code><a href="../reference/getActions.html">getActions()</a></code> and <code><a href="../reference/getPlanningUnits.html">getPlanningUnits()</a></code>. <code><a href="../reference/getActions.html">getActions()</a></code> shows what actions must be taken against which threats to achieve the objective, which is to achieve the different representation targets. Instead <code><a href="../reference/getPlanningUnits.html">getPlanningUnits()</a></code> shows in which PU’s such efforts were made.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get actions from solution</span>
<span class="va">actions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getActions.html">getActions</a></span><span class="op">(</span><span class="va">s</span>, format <span class="op">=</span> <span class="st">"wide"</span><span class="op">)</span>

<span class="co"># print first six rows of data</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">actions</span><span class="op">)</span>
<span class="co">#&gt;   pu 1 2</span>
<span class="co">#&gt; 1  1 0 0</span>
<span class="co">#&gt; 2  2 0 0</span>
<span class="co">#&gt; 3  3 0 0</span>
<span class="co">#&gt; 4  4 0 0</span>
<span class="co">#&gt; 5  5 0 0</span>
<span class="co">#&gt; 6  6 0 0</span>

<span class="co"># plot actions</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">actions</span><span class="op">$</span><span class="va">`1`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">actions</span><span class="op">$</span><span class="va">`2`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"action 1"</span>, <span class="st">"action 2"</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">)</span></code></pre></div>
<p><img src="figure/P16-1.png" title="plot of chunk P16" alt="plot of chunk P16" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get planning units from solution</span>
<span class="va">pu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getPlanningUnits.html">getPlanningUnits</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span>

<span class="co"># plot planning units with actions inside</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">pu</span><span class="op">$</span><span class="va">solution</span>

<span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></code></pre></div>
<p><img src="figure/P17-1.png" title="plot of chunk P17" alt="plot of chunk P17" style="display: block; margin: auto;"></p>
<p>You can also obtain information about the total benefits achieved by feature with the <code><a href="../reference/getBenefit.html">getBenefit()</a></code> function and the benefit of features in each site with the <code><a href="../reference/getLocalBenefit.html">getLocalBenefit()</a></code> function. More information on the specific calculation of the benefit in the <a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">sensitivities</a> vignette.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get local benefits</span>
<span class="va">local_benefits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLocalBenefit.html">getLocalBenefit</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span>
<span class="va">local_benefits</span> <span class="op">&lt;-</span> <span class="fu">reshape2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span><span class="op">(</span><span class="va">local_benefits</span>, <span class="va">pu</span><span class="op">~</span><span class="va">feature</span>,value.var <span class="op">=</span> <span class="st">"local_benefit"</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>

<span class="co"># plot local benefits</span>
<span class="va">group_rasters</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html">stack</a></span><span class="op">(</span><span class="va">r</span>, <span class="va">r</span>, <span class="va">r</span>, <span class="va">r</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">local_benefits</span><span class="op">$</span><span class="va">`1`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">local_benefits</span><span class="op">$</span><span class="va">`2`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">local_benefits</span><span class="op">$</span><span class="va">`3`</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">local_benefits</span><span class="op">$</span><span class="va">`4`</span>

<span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"feature 1"</span>, <span class="st">"feature 2"</span>, <span class="st">"feature 3"</span>, <span class="st">"feature 4"</span><span class="op">)</span>
<span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">group_rasters</span><span class="op">)</span></code></pre></div>
<p><img src="figure/P18-1.png" title="plot of chunk P18" alt="plot of chunk P18" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get benefit from solution</span>
<span class="fu"><a href="../reference/getBenefit.html">getBenefit</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span>
<span class="co">#&gt;   feature dist dist_threatened benefit.recovery benefit.recovery.sol</span>
<span class="co">#&gt; 1       1   47              47               47                   11</span>
<span class="co">#&gt; 2       2   30              30               30                   16</span>
<span class="co">#&gt; 3       3   66              66               66                   10</span>
<span class="co">#&gt; 4       4   33              33               33                    9</span></code></pre></div>
<p>If you need more information about the solution, you can use other <em>get</em> functions (e.g. <code><a href="../reference/getGap.html">getGap()</a></code>, <code><a href="../reference/getActionsConnectivity.html">getActionsConnectivity()</a></code>). More details in the <a href="https://prioriactions.github.io/prioriactions/reference/index.html">references</a> section.</p>
</div>
<div id="sensitivity-analysis-of-the-results" class="section level3">
<h3 class="hasAnchor">
<a href="#sensitivity-analysis-of-the-results" class="anchor"></a>Sensitivity analysis of the results</h3>
<p>You may be interested in evaluating different values of targets or budgets and thus obtain more information for stakeholders (more than one solution). We have implemented evaluation functions that allow different parameters to be run in sequence for the same mathematical model. You can do this by manually running the previous steps for the different parameters (i.e., running the previous steps once by parameter). However, the <em>eval</em> functions have two advantages over their counterpart: 1) they are more efficient to create the models. This is because the model is once created and then updated with the new information; 2) the output is a <a href="https://prioriactions.github.io/prioriactions/reference/portfolio-class.html">portfolio</a> object, which allows obtaining information about the group of solutions, including, all <em>get</em> functions.</p>
<p>Now, we want to evaluate different levels of targets. For example, 20%, 30% and 40% of the maximum benefit per feature. For this, we use the <code><a href="../reference/evalTarget.html">evalTarget()</a></code> function:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Evaluate differents targets</span>
<span class="va">port</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evalTarget.html">evalTarget</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">inputs</span>, values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span><span class="op">)</span>, output_file <span class="op">=</span> <span class="cn">FALSE</span>, time_limit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; *********************************</span>
<span class="co">#&gt;  Iteration 1 of 3: Prop0.2</span>
<span class="co">#&gt; *********************************</span>
<span class="co">#&gt; Warning: The blm argument was set to 0, so the boundary data has no effect</span>
<span class="co">#&gt; Warning: Some blm_actions argument were set to 0, so the boundary data has no</span>
<span class="co">#&gt; effect for these cases</span>
<span class="co">#&gt; Gurobi Optimizer version 9.1.2 build v9.1.2rc0 (linux64)</span>
<span class="co">#&gt; Thread count: 2 physical cores, 4 logical processors, using up to 2 threads</span>
<span class="co">#&gt; Optimize a model with 280 rows, 589 columns and 822 nonzeros</span>
<span class="co">#&gt; Model fingerprint: 0x1021d135</span>
<span class="co">#&gt; Model has 176 general constraints</span>
<span class="co">#&gt; Variable types: 352 continuous, 237 integer (237 binary)</span>
<span class="co">#&gt; Coefficient statistics:</span>
<span class="co">#&gt;   Matrix range     [5e-01, 2e+00]</span>
<span class="co">#&gt;   Objective range  [1e+00, 1e+01]</span>
<span class="co">#&gt;   Bounds range     [1e+00, 1e+00]</span>
<span class="co">#&gt;   RHS range        [6e+00, 1e+01]</span>
<span class="co">#&gt; Found heuristic solution: objective 1002.0000000</span>
<span class="co">#&gt; Presolve added 289 rows and 635 columns</span>
<span class="co">#&gt; Presolve time: 0.00s</span>
<span class="co">#&gt; Presolved: 569 rows, 1224 columns, 2970 nonzeros</span>
<span class="co">#&gt; Presolved model has 176 SOS constraint(s)</span>
<span class="co">#&gt; Variable types: 1056 continuous, 168 integer (162 binary)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Root relaxation: objective 1.161000e+02, 190 iterations, 0.00 seconds</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work</span>
<span class="co">#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      0     0  116.10000    0   36 1002.00000  116.10000  88.4%     -    0s</span>
<span class="co">#&gt; H    0     0                     989.0000000  116.10000  88.3%     -    0s</span>
<span class="co">#&gt;      0     0  124.40000    0   16  989.00000  124.40000  87.4%     -    0s</span>
<span class="co">#&gt; H    0     0                     144.0000000  124.40000  13.6%     -    0s</span>
<span class="co">#&gt;      0     0  124.40000    0   22  144.00000  124.40000  13.6%     -    0s</span>
<span class="co">#&gt;      0     0  124.46667    0   24  144.00000  124.46667  13.6%     -    0s</span>
<span class="co">#&gt; H    0     0                     133.0000000  124.46667  6.42%     -    0s</span>
<span class="co">#&gt;      0     0  124.46667    0   28  133.00000  124.46667  6.42%     -    0s</span>
<span class="co">#&gt;      0     0  124.48500    0   30  133.00000  124.48500  6.40%     -    0s</span>
<span class="co">#&gt;      0     0  124.80000    0   16  133.00000  124.80000  6.17%     -    0s</span>
<span class="co">#&gt;      0     0  125.20000    0   21  133.00000  125.20000  5.86%     -    0s</span>
<span class="co">#&gt;      0     0  125.60000    0   21  133.00000  125.60000  5.56%     -    0s</span>
<span class="co">#&gt;      0     0  125.60000    0   17  133.00000  125.60000  5.56%     -    0s</span>
<span class="co">#&gt;      0     0  125.60000    0    9  133.00000  125.60000  5.56%     -    0s</span>
<span class="co">#&gt;      0     0  125.60000    0   14  133.00000  125.60000  5.56%     -    0s</span>
<span class="co">#&gt;      0     0  125.60000    0   20  133.00000  125.60000  5.56%     -    0s</span>
<span class="co">#&gt;      0     0  125.60000    0   14  133.00000  125.60000  5.56%     -    0s</span>
<span class="co">#&gt;      0     0  125.60000    0   14  133.00000  125.60000  5.56%     -    0s</span>
<span class="co">#&gt;      0     2  125.60000    0   14  133.00000  125.60000  5.56%     -    0s</span>
<span class="co">#&gt;   1678   952  130.00000   38   10  133.00000  126.60000  4.81%   3.2    1s</span>
<span class="co">#&gt;   7504  4347 infeasible   62       133.00000  126.60000  4.81%   3.3    2s</span>
<span class="co">#&gt;  13830  7619  128.90000   32    9  133.00000  127.03158  4.49%   3.3    3s</span>
<span class="co">#&gt;  20299 10589 infeasible   40       133.00000  127.45164  4.17%   3.4    4s</span>
<span class="co">#&gt;  26679 13755     cutoff   43       133.00000  127.60000  4.06%   3.4    5s</span>
<span class="co">#&gt;  32510 16047  130.20000   42   14  133.00000  127.90000  3.83%   3.5    6s</span>
<span class="co">#&gt;  38480 18610  132.00000   47    3  133.00000  128.00000  3.76%   3.5    7s</span>
<span class="co">#&gt;  44620 21240  129.17875   36   16  133.00000  128.20000  3.61%   3.6    8s</span>
<span class="co">#&gt;  50379 23436  129.99999   21   17  133.00000  128.40000  3.46%   3.7    9s</span>
<span class="co">#&gt;  55605 25109  130.16435   31   14  133.00000  128.50000  3.38%   3.7   10s</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Cutting planes:</span>
<span class="co">#&gt;   Gomory: 5</span>
<span class="co">#&gt;   Cover: 27</span>
<span class="co">#&gt;   MIR: 5</span>
<span class="co">#&gt;   Flow cover: 10</span>
<span class="co">#&gt;   Inf proof: 9</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Explored 55811 nodes (208053 simplex iterations) in 10.00 seconds</span>
<span class="co">#&gt; Thread count was 2 (of 4 available processors)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Solution count 4: 133 144 989 1002 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Time limit reached</span>
<span class="co">#&gt; Best objective 1.330000000000e+02, best bound 1.290000000000e+02, gap 3.0075%</span>
<span class="co">#&gt; *********************************</span>
<span class="co">#&gt;  Iteration 2 of 3: Prop0.3</span>
<span class="co">#&gt; *********************************</span>
<span class="co">#&gt; Gurobi Optimizer version 9.1.2 build v9.1.2rc0 (linux64)</span>
<span class="co">#&gt; Thread count: 2 physical cores, 4 logical processors, using up to 2 threads</span>
<span class="co">#&gt; Optimize a model with 280 rows, 589 columns and 822 nonzeros</span>
<span class="co">#&gt; Model fingerprint: 0x9ac23276</span>
<span class="co">#&gt; Model has 176 general constraints</span>
<span class="co">#&gt; Variable types: 352 continuous, 237 integer (237 binary)</span>
<span class="co">#&gt; Coefficient statistics:</span>
<span class="co">#&gt;   Matrix range     [5e-01, 2e+00]</span>
<span class="co">#&gt;   Objective range  [1e+00, 1e+01]</span>
<span class="co">#&gt;   Bounds range     [1e+00, 1e+00]</span>
<span class="co">#&gt;   RHS range        [9e+00, 2e+01]</span>
<span class="co">#&gt; Found heuristic solution: objective 1002.0000000</span>
<span class="co">#&gt; Presolve added 289 rows and 635 columns</span>
<span class="co">#&gt; Presolve time: 0.00s</span>
<span class="co">#&gt; Presolved: 569 rows, 1224 columns, 2970 nonzeros</span>
<span class="co">#&gt; Presolved model has 176 SOS constraint(s)</span>
<span class="co">#&gt; Variable types: 1056 continuous, 168 integer (162 binary)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Root relaxation: objective 1.896000e+02, 224 iterations, 0.00 seconds</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work</span>
<span class="co">#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      0     0  189.60000    0   40 1002.00000  189.60000  81.1%     -    0s</span>
<span class="co">#&gt; H    0     0                     957.0000000  189.60000  80.2%     -    0s</span>
<span class="co">#&gt;      0     0  198.52882    0   16  957.00000  198.52882  79.3%     -    0s</span>
<span class="co">#&gt; H    0     0                     208.0000000  198.52882  4.55%     -    0s</span>
<span class="co">#&gt;      0     0  198.52882    0   20  208.00000  198.52882  4.55%     -    0s</span>
<span class="co">#&gt; H    0     0                     205.0000000  198.52882  3.16%     -    0s</span>
<span class="co">#&gt;      0     0  198.52882    0   23  205.00000  198.52882  3.16%     -    0s</span>
<span class="co">#&gt;      0     0  198.57686    0   25  205.00000  198.57686  3.13%     -    0s</span>
<span class="co">#&gt;      0     0  198.57778    0   20  205.00000  198.57778  3.13%     -    0s</span>
<span class="co">#&gt;      0     0  198.66000    0   20  205.00000  198.66000  3.09%     -    0s</span>
<span class="co">#&gt;      0     0  198.75860    0   23  205.00000  198.75860  3.04%     -    0s</span>
<span class="co">#&gt;      0     0  198.80699    0   24  205.00000  198.80699  3.02%     -    0s</span>
<span class="co">#&gt;      0     0  198.89488    0   27  205.00000  198.89488  2.98%     -    0s</span>
<span class="co">#&gt;      0     0  198.93333    0   17  205.00000  198.93333  2.96%     -    0s</span>
<span class="co">#&gt;      0     0  198.93333    0   17  205.00000  198.93333  2.96%     -    0s</span>
<span class="co">#&gt;      0     0  199.16000    0   15  205.00000  199.16000  2.85%     -    0s</span>
<span class="co">#&gt;      0     0  199.16000    0   20  205.00000  199.16000  2.85%     -    0s</span>
<span class="co">#&gt;      0     0  199.20370    0   20  205.00000  199.20370  2.83%     -    0s</span>
<span class="co">#&gt;      0     0  199.20370    0   20  205.00000  199.20370  2.83%     -    0s</span>
<span class="co">#&gt;      0     0  199.20370    0   25  205.00000  199.20370  2.83%     -    0s</span>
<span class="co">#&gt;      0     0  199.20370    0   18  205.00000  199.20370  2.83%     -    0s</span>
<span class="co">#&gt;      0     2  199.20370    0   18  205.00000  199.20370  2.83%     -    0s</span>
<span class="co">#&gt;   2232   654  202.30526    9   27  205.00000  201.64034  1.64%   3.8    1s</span>
<span class="co">#&gt;   5087   597     cutoff   30       205.00000  202.01666  1.46%   4.0    2s</span>
<span class="co">#&gt;   8830   197 infeasible   26       205.00000  203.60000  0.68%   3.9    3s</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Cutting planes:</span>
<span class="co">#&gt;   Gomory: 4</span>
<span class="co">#&gt;   Implied bound: 1</span>
<span class="co">#&gt;   MIR: 6</span>
<span class="co">#&gt;   Flow cover: 25</span>
<span class="co">#&gt;   Inf proof: 9</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Explored 10318 nodes (39779 simplex iterations) in 3.25 seconds</span>
<span class="co">#&gt; Thread count was 2 (of 4 available processors)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Solution count 4: 205 208 957 1002 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Optimal solution found (tolerance 0.00e+00)</span>
<span class="co">#&gt; Warning: max constraint violation (2.8000e-02) exceeds tolerance</span>
<span class="co">#&gt; Warning: max general constraint violation (2.8000e-02) exceeds tolerance</span>
<span class="co">#&gt;          (model may be infeasible or unbounded - try turning presolve off)</span>
<span class="co">#&gt; Best objective 2.050000000000e+02, best bound 2.050000000000e+02, gap 0.0000%</span>
<span class="co">#&gt; *********************************</span>
<span class="co">#&gt;  Iteration 3 of 3: Prop0.4</span>
<span class="co">#&gt; *********************************</span>
<span class="co">#&gt; Gurobi Optimizer version 9.1.2 build v9.1.2rc0 (linux64)</span>
<span class="co">#&gt; Thread count: 2 physical cores, 4 logical processors, using up to 2 threads</span>
<span class="co">#&gt; Optimize a model with 280 rows, 589 columns and 822 nonzeros</span>
<span class="co">#&gt; Model fingerprint: 0xdcbe1adf</span>
<span class="co">#&gt; Model has 176 general constraints</span>
<span class="co">#&gt; Variable types: 352 continuous, 237 integer (237 binary)</span>
<span class="co">#&gt; Coefficient statistics:</span>
<span class="co">#&gt;   Matrix range     [5e-01, 2e+00]</span>
<span class="co">#&gt;   Objective range  [1e+00, 1e+01]</span>
<span class="co">#&gt;   Bounds range     [1e+00, 1e+00]</span>
<span class="co">#&gt;   RHS range        [1e+01, 3e+01]</span>
<span class="co">#&gt; Found heuristic solution: objective 1002.0000000</span>
<span class="co">#&gt; Presolve added 289 rows and 635 columns</span>
<span class="co">#&gt; Presolve time: 0.00s</span>
<span class="co">#&gt; Presolved: 569 rows, 1224 columns, 2970 nonzeros</span>
<span class="co">#&gt; Presolved model has 176 SOS constraint(s)</span>
<span class="co">#&gt; Variable types: 1056 continuous, 168 integer (162 binary)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Root relaxation: objective 2.716000e+02, 224 iterations, 0.00 seconds</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work</span>
<span class="co">#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      0     0  271.60000    0   37 1002.00000  271.60000  72.9%     -    0s</span>
<span class="co">#&gt; H    0     0                     975.0000000  271.60000  72.1%     -    0s</span>
<span class="co">#&gt;      0     0  281.00000    0    7  975.00000  281.00000  71.2%     -    0s</span>
<span class="co">#&gt; H    0     0                     293.0000000  281.00000  4.10%     -    0s</span>
<span class="co">#&gt;      0     0  281.40000    0    9  293.00000  281.40000  3.96%     -    0s</span>
<span class="co">#&gt;      0     0  281.40000    0   18  293.00000  281.40000  3.96%     -    0s</span>
<span class="co">#&gt; H    0     0                     292.0000000  281.40000  3.63%     -    0s</span>
<span class="co">#&gt;      0     0  281.40000    0   18  292.00000  281.40000  3.63%     -    0s</span>
<span class="co">#&gt;      0     0  281.40000    0   19  292.00000  281.40000  3.63%     -    0s</span>
<span class="co">#&gt;      0     0  281.40000    0   19  292.00000  281.40000  3.63%     -    0s</span>
<span class="co">#&gt;      0     2  281.40000    0   19  292.00000  281.40000  3.63%     -    0s</span>
<span class="co">#&gt;   1970   951  285.20000   20   13  292.00000  283.09600  3.05%   3.8    1s</span>
<span class="co">#&gt;   7012  3961 infeasible   47       292.00000  283.40000  2.95%   3.3    2s</span>
<span class="co">#&gt;  12295  7259  285.63333   71   14  292.00000  283.95500  2.76%   3.2    3s</span>
<span class="co">#&gt;  18621 10984  286.50000   34   15  292.00000  284.00000  2.74%   3.2    4s</span>
<span class="co">#&gt;  24189 14258  286.80000   53   13  292.00000  284.13418  2.69%   3.3    5s</span>
<span class="co">#&gt;  29438 17228  290.20000   61    5  292.00000  284.20000  2.67%   3.4    6s</span>
<span class="co">#&gt;  34408 20001  284.70000   33   15  292.00000  284.40000  2.60%   3.5    7s</span>
<span class="co">#&gt;  39666 22959 infeasible   62       292.00000  284.40000  2.60%   3.5    8s</span>
<span class="co">#&gt;  44979 25883  289.80000   52    5  292.00000  284.56667  2.55%   3.5    9s</span>
<span class="co">#&gt;  49056 28032  285.60000   38   11  292.00000  284.60000  2.53%   3.5   10s</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Cutting planes:</span>
<span class="co">#&gt;   Gomory: 9</span>
<span class="co">#&gt;   MIR: 4</span>
<span class="co">#&gt;   Flow cover: 25</span>
<span class="co">#&gt;   Inf proof: 3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Explored 49142 nodes (173673 simplex iterations) in 10.00 seconds</span>
<span class="co">#&gt; Thread count was 2 (of 4 available processors)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Solution count 4: 292 293 975 1002 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Time limit reached</span>
<span class="co">#&gt; Best objective 2.920000000000e+02, best bound 2.850000000000e+02, gap 2.3973%</span></code></pre></div>
<p>Like the <code><a href="../reference/prioriactions.html">prioriactions()</a></code> function, all <em>eval</em> functions inherit the parameters of the <code><a href="../reference/problem.html">problem()</a></code>, <code><a href="../reference/minimizeCosts.html">minimizeCosts()</a></code>, <code><a href="../reference/maximizeBenefits.html">maximizeBenefits()</a></code> and <code><a href="../reference/solve.html">solve()</a></code> functions.</p>
<p>Note that two of the three solutions do not have a <em>gap</em> of 0%. This means that it is not known with certainty that the solution found is optimal (<em>gap</em> of 0%). However, it could be. For this example, we have limited the run time to 10 seconds (<code>time_limit</code> = 10).</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Get gap information of solutions inside portfolio</span>
<span class="fu"><a href="../reference/getGap.html">getGap</a></span><span class="op">(</span><span class="va">port</span><span class="op">)</span>
<span class="co">#&gt; [1] 3.0075 0.0000 2.3973</span></code></pre></div>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-beyer2016" class="csl-entry">
Beyer, Hawthorne L., Yann Dujardin, Matthew E. Watts, and Hugh P. Possingham. 2016. <span>“Solving Conservation Planning Problems with Integer Linear Programming.”</span> <em>Ecological Modelling</em> 328 (May): 14–22. <a href="https://doi.org/10.1016/j.ecolmodel.2016.02.005">https://doi.org/10.1016/j.ecolmodel.2016.02.005</a>.
</div>
<div id="ref-watts2009" class="csl-entry">
Watts, Matthew E., Ian R. Ball, Romola S. Stewart, Carissa J. Klein, Kerrie Wilson, Charles Steinback, Reinaldo Lourival, Lindsay Kircher, and Hugh P. Possingham. 2009. <span>“Marxan with Zones: Software for Optimal Conservation Based Land- and Sea-Use Zoning.”</span> <em>Environmental Modelling &amp; Software</em> 24 (12): 1513–21. <a href="https://doi.org/10.1016/j.envsoft.2009.06.005">https://doi.org/10.1016/j.envsoft.2009.06.005</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.researchgate.net/profile/Jose_Salgado-Rojas">Jose Salgado-Rojas</a>, <a href="https://www.researchgate.net/profile/Irlanda_Ceballos">Irlanda Ceballos-Fuentealba</a>, <a href="https://www.researchgate.net/profile/Virgilio_Hermoso">Virgilio Hermoso</a>, <a href="https://www.researchgate.net/profile/Eduardo_Alvarez-Miranda">Eduardo Alvarez-Miranda</a>, <a href="https://www.researchgate.net/profile/Jordi_Garcia-Gonzalo">Jordi Garcia-Gonzalo</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({


    apiKey: 'f00985ff93067595b4da97a65fe69f1a',
    indexName: 'prioriactions',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>

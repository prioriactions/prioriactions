<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extract benefit values — getSolutionBenefit • prioriactions</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Extract benefit values — getSolutionBenefit"><meta property="og:description" content="Returns the total benefit induced by the corresponding solution. The
total benefit is computed as the sum of the benefits obtained, for all features, across
all the units in the planning area."><meta property="og:image" content="https://prioriactions.github.io/prioriactions/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6YB8F3838H"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6YB8F3838H');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioriactions</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/prioriactions.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Introduction</li>
    <li>
      <a href="../articles/sensitivities.html">Benefits and sensitivities</a>
    </li>
    <li>
      <a href="../articles/objectives.html">Planning objectives</a>
    </li>
    <li>
      <a href="../articles/benchmark.html">Solver benchmarks</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Study cases</li>
    <li>
      <a href="../articles/MitchellRiver.html">Mitchell River</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/prioriactions/prioriactions/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract benefit values</h1>
    <small class="dont-index">Source: <a href="https://github.com/prioriactions/prioriactions/blob/HEAD/R/getSolutionBenefit.R" class="external-link"><code>R/getSolutionBenefit.R</code></a></small>
    <div class="hidden name"><code>getSolutionBenefit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns the total benefit induced by the corresponding solution. The
total benefit is computed as the sum of the benefits obtained, for all features, across
all the units in the planning area.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getSolutionBenefit</span><span class="op">(</span><span class="va">x</span>, type <span class="op">=</span> <span class="st">"total"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p><code>Solution-class</code> or <code>Portfolio-class</code>.</p></dd>


<dt>type</dt>
<dd><p><code>character</code>. Output format of the benefits matrix; <code>total</code> shows
the total benefit by feature, while <code>local</code> format shows the benefit achieved per feature and planning unit.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For a given feature \(s\), let \(I_s\) be the set of planning units associated with \(s\),
let \(r_{is}\) is the amount of feature \(s\) in planning unit \(i\), let \(K_{s}\) be the
set of threats associated with \(s\), and let \(K_{i}\) be the set of threats associated with \(i\).
The local benefit associated with \(s\) in a unit \(i\) is given by:</p>
<p>$$
b_{is} = p_{is} r_{is} \\
b_{is} = \frac{ \sum_{k \in K_i \cap K_s}{x_{ik}}}{|K_i \cap K_s|} r_{is}
$$</p>
<p>Where \(x_{ik}\) is a decision variable such that \(x_{ik} = 1\) if an
action againts threat \(k\) is applied in unit \(i\), and \(x_{ik} = 0\), otherwise.
This expression for the probability of persistence of the feature (\(p_{is}\))
is defined only for the cases where we work with values of binary intensities
(presence or absence of threats). See the <a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">sensitivities</a>
vignette to know the work with continuous intensities.</p>
<p>While the total benefit is calculated as the sum of the local benefits per feature:</p>
<p>$$
b_{s} = \sum_{i \in I_{s}}\frac{ \sum_{k \in K_i \cap K_s}{x_{ik}}}{|K_i \cap K_s|} r_{is}
$$</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># set seed for reproducibility</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">14</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim_pu_data</span>, <span class="va">sim_features_data</span>, <span class="va">sim_dist_features_data</span>,</span></span>
<span class="r-in"><span><span class="va">sim_threats_data</span>, <span class="va">sim_dist_threats_data</span>, <span class="va">sim_sensitivity_data</span>,</span></span>
<span class="r-in"><span><span class="va">sim_boundary_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create data instance</span></span></span>
<span class="r-in"><span><span class="va">problem_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="inputData.html">inputData</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  pu <span class="op">=</span> <span class="va">sim_pu_data</span>, features <span class="op">=</span> <span class="va">sim_features_data</span>, dist_features <span class="op">=</span> <span class="va">sim_dist_features_data</span>,</span></span>
<span class="r-in"><span>  threats <span class="op">=</span> <span class="va">sim_threats_data</span>, dist_threats <span class="op">=</span> <span class="va">sim_dist_threats_data</span>,</span></span>
<span class="r-in"><span>  sensitivity <span class="op">=</span> <span class="va">sim_sensitivity_data</span>, boundary <span class="op">=</span> <span class="va">sim_boundary_data</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get maximum benefits to obtain</span></span></span>
<span class="r-in"><span><span class="fu"><a href="getPotentialBenefit.html">getPotentialBenefit</a></span><span class="op">(</span><span class="va">problem_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   feature dist dist_threatened maximum.conservation.benefit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       1   47              47                            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       2   30              28                            2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       3   66              56                           10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       4   33              33                            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   maximum.recovery.benefit maximum.benefit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                       47              47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                       28              30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                       56              66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                       33              33</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create optimization model</span></span></span>
<span class="r-in"><span><span class="va">problem_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="problem.html">problem</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">problem_data</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The blm argument was set to 0, so the boundary data has no effect</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Some blm_actions argument were set to 0, so the boundary data has no effect for these cases</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Solve the optimization model</span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="solve.html">solve</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">problem_model</span>, time_limit <span class="op">=</span> <span class="fl">2</span>, output_file <span class="op">=</span> <span class="cn">FALSE</span>, cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Rcplex: num variables=396 num constraints=284</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get local benefits of solution</span></span></span>
<span class="r-in"><span><span class="va">local_benefit</span> <span class="op">&lt;-</span> <span class="fu">getSolutionBenefit</span><span class="op">(</span><span class="va">s</span>, type <span class="op">=</span> <span class="st">"local"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">local_benefit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     solution_name pu feature benefit.conservation benefit.recovery</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 201           sol  1       3                    0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 202           sol  2       3                    0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 203           sol  3       3                    0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 204           sol  4       3                    0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 205           sol  5       3                    0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206           sol  6       3                    0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     benefit.total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 201             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 202             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 203             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 204             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 205             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206             0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get total benefits of solution</span></span></span>
<span class="r-in"><span><span class="va">total_benefit</span> <span class="op">&lt;-</span> <span class="fu">getSolutionBenefit</span><span class="op">(</span><span class="va">s</span>, type <span class="op">=</span> <span class="st">"total"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">total_benefit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   solution_name feature benefit.conservation benefit.recovery benefit.total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           sol       1                    0               40            40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           sol       2                    0               28            28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           sol       3                    0               50            50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           sol       4                    0               30            30</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.researchgate.net/profile/Jose_Salgado-Rojas" class="external-link">Jose Salgado-Rojas</a>, <a href="https://www.researchgate.net/profile/Irlanda_Ceballos" class="external-link">Irlanda Ceballos-Fuentealba</a>, <a href="https://www.researchgate.net/profile/Virgilio_Hermoso" class="external-link">Virgilio Hermoso</a>, <a href="https://www.researchgate.net/profile/Eduardo_Alvarez-Miranda" class="external-link">Eduardo Alvarez-Miranda</a>, <a href="https://www.researchgate.net/profile/Jordi_Garcia-Gonzalo" class="external-link">Jordi Garcia-Gonzalo</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'f00985ff93067595b4da97a65fe69f1a',
    indexName: 'prioriactions',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

